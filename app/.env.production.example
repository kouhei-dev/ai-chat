# 本番環境用環境変数テンプレート
# Cloud Runデプロイ時に設定が必要な環境変数

# ===========================================
# 必須設定
# ===========================================

# MongoDB接続URL（MongoDB Atlas推奨）
# 例: mongodb+srv://<username>:<password>@cluster.xxxxx.mongodb.net/ai-chat?retryWrites=true&w=majority
DATABASE_URL="your-mongodb-atlas-url"

# Anthropic APIキー
# https://console.anthropic.com/ で取得
ANTHROPIC_API_KEY="sk-ant-api03-xxxxx..."

# ===========================================
# オプション設定
# ===========================================

# セッション有効期限（時間）
# デフォルト: 24
SESSION_EXPIRY_HOURS=24

# クリーンアップAPI認証用シークレット
# 初回のみ生成: openssl rand -hex 32
# Cloud Schedulerからの定期実行に必要
CLEANUP_SECRET="your-cleanup-secret"

# ===========================================
# デプロイ方法
# ===========================================
# このファイルを .env.production にコピーして値を設定後、以下を実行:
#   ./scripts/deploy.sh [PROJECT_ID]
#
# deploy.sh が自動で環境変数をCloud Runに設定します。

# ===========================================
# Cloud Scheduler設定（初回のみ）
# ===========================================
# 期限切れセッションを毎日深夜3時に削除
# ※ CLEANUP_SECRET は上記で設定した値を使用
#
# gcloud scheduler jobs create http cleanup-sessions \
#   --location asia-northeast1 \
#   --schedule "0 3 * * *" \
#   --uri "https://<your-service-url>/api/cleanup" \
#   --http-method POST \
#   --headers "Authorization=Bearer <CLEANUP_SECRET>"
